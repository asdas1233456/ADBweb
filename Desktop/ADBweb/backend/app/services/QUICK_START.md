# è®¾å¤‡å¥åº·åº¦ç®—æ³• V2.0 - å¿«é€Ÿå¼€å§‹

## ğŸš€ 5åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹

### 1. è¿è¡Œæµ‹è¯•ç”¨ä¾‹

```bash
cd ADBweb/backend/app/services
python device_health_v2.py
```

**é¢„æœŸè¾“å‡º**:
```
================================================================================
è®¾å¤‡å¥åº·åº¦è¯„åˆ†ç®—æ³•æµ‹è¯•
================================================================================

ã€æµ‹è¯•ç”¨ä¾‹1ã€‘å¥åº·è®¾å¤‡ - å°ç±³12 Pro
æ€»åˆ†: 99.00 / 100
å¥åº·ç­‰çº§: ä¼˜ç§€ (excellent)
...
```

### 2. åŸºç¡€ä½¿ç”¨ç¤ºä¾‹

```python
from device_health_v2 import DeviceHealthScorer
from datetime import datetime, timedelta

# åˆ›å»ºè¯„åˆ†å™¨
scorer = DeviceHealthScorer()

# å‡†å¤‡è®¾å¤‡æ•°æ®ï¼ˆæ”¯æŒå¤šç§æ ¼å¼ï¼‰
metrics = {
    'battery_level': '85%',      # å­—ç¬¦ä¸²æ ¼å¼
    'temperature': '32.5â„ƒ',      # å¸¦å•ä½
    'cpu_usage': 25,             # æ•°å€¼æ ¼å¼
    'memory_usage': 45,
    'storage_usage': 60,
    'network_status': 'connected',
    'last_active_time': datetime.now() - timedelta(minutes=10)
}

# è®¡ç®—å¥åº·åº¦
result = scorer.calculate_score(metrics)

# æŸ¥çœ‹ç»“æœ
print(f"æ€»åˆ†: {result['total_score']}")
print(f"ç­‰çº§: {result['level_name']}")
print(f"é¢œè‰²: {result['level_color']}")
print(f"å»ºè®®: {result['recommendations']}")
```

### 3. è‡ªå®šä¹‰æƒé‡

```python
# å®šä¹‰è‡ªå®šä¹‰æƒé‡ï¼ˆæ€»å’Œå¿…é¡»ä¸º1.0ï¼‰
custom_weights = {
    'battery': 0.30,      # æé«˜ç”µé‡æƒé‡
    'temperature': 0.25,  # æé«˜æ¸©åº¦æƒé‡
    'cpu': 0.15,
    'memory': 0.15,
    'storage': 0.05,
    'network': 0.05,
    'activity': 0.05,
}

# ä½¿ç”¨è‡ªå®šä¹‰æƒé‡åˆ›å»ºè¯„åˆ†å™¨
scorer = DeviceHealthScorer(custom_weights)
```

### 4. æ‰¹é‡è®¡ç®—

```python
# å‡†å¤‡å¤šä¸ªè®¾å¤‡çš„æ•°æ®
devices = [
    {'battery_level': 85, 'temperature': 32, ...},
    {'battery_level': 35, 'temperature': 42, ...},
    {'battery_level': 15, 'temperature': 48, ...},
]

# æ‰¹é‡è®¡ç®—
results = scorer.batch_calculate(devices)

# æŸ¥çœ‹ç»“æœ
for i, result in enumerate(results, 1):
    print(f"è®¾å¤‡{i}: {result['total_score']}åˆ† - {result['level_name']}")
```

---

## ğŸ“Š è¿”å›ç»“æœè¯´æ˜

```python
{
    'total_score': 85.75,           # æ€»åˆ† (0-100)
    'level': 'good',                # ç­‰çº§ä»£ç 
    'level_name': 'è‰¯å¥½',           # ç­‰çº§åç§°
    'level_color': '#1890ff',       # ç­‰çº§é¢œè‰²
    
    'dimension_scores': {           # å„ç»´åº¦åŸå§‹å¾—åˆ†
        'battery': 100.0,
        'temperature': 100.0,
        'cpu': 90.0,
        ...
    },
    
    'weighted_scores': {            # å„ç»´åº¦åŠ æƒåå¾—åˆ†
        'battery': 25.0,
        'temperature': 20.0,
        ...
    },
    
    'recommendations': [            # æ”¹è¿›å»ºè®®
        'âœ… è®¾å¤‡çŠ¶æ€è‰¯å¥½ï¼Œæ— éœ€ç‰¹åˆ«ç»´æŠ¤'
    ],
    
    'metrics': {                    # è§£æåçš„åŸå§‹æŒ‡æ ‡
        'battery_level': 85.0,
        'temperature': 32.5,
        ...
    }
}
```

---

## ğŸ¯ å¥åº·ç­‰çº§è¯´æ˜

| åˆ†æ•° | ç­‰çº§ | é¢œè‰² | è¯´æ˜ |
|------|------|------|------|
| 90-100 | ä¼˜ç§€ | ğŸŸ¢ ç»¿è‰² | è®¾å¤‡çŠ¶æ€æä½³ï¼Œå¯æ‰¿æ‹…é«˜è´Ÿè½½ä»»åŠ¡ |
| 80-89 | è‰¯å¥½ | ğŸ”µ è“è‰² | è®¾å¤‡çŠ¶æ€æ­£å¸¸ï¼Œé€‚åˆå¸¸è§„ä»»åŠ¡ |
| 60-79 | ä¸€èˆ¬ | ğŸŸ  æ©™è‰² | éœ€è¦å…³æ³¨ï¼Œå»ºè®®é™ä½ä»»åŠ¡é¢‘ç‡ |
| 40-59 | è­¦å‘Š | ğŸŸ  æ©™çº¢ | éœ€è¦ç»´æŠ¤ï¼Œé¿å…æ‰§è¡Œé‡è¦ä»»åŠ¡ |
| 0-39 | å±é™© | ğŸ”´ çº¢è‰² | ç«‹å³å¤„ç†ï¼Œåœæ­¢ä»»åŠ¡æ‰§è¡Œ |

---

## ğŸ“ è¯„åˆ†è§„åˆ™é€ŸæŸ¥

### ç”µé‡è¯„åˆ†
- 100åˆ†: â‰¥ 80%
- 0åˆ†: â‰¤ 20%
- ä¸­é—´: çº¿æ€§æ’å€¼

### æ¸©åº¦è¯„åˆ†
- 100åˆ†: â‰¤ 35â„ƒ
- 0åˆ†: â‰¥ 45â„ƒ
- ä¸­é—´: çº¿æ€§æ’å€¼

### CPUä½¿ç”¨ç‡
- 100åˆ†: â‰¤ 30%
- 0åˆ†: â‰¥ 80%
- ä¸­é—´: çº¿æ€§æ’å€¼

### å†…å­˜ä½¿ç”¨ç‡
- 100åˆ†: â‰¤ 50%
- 0åˆ†: â‰¥ 85%
- ä¸­é—´: çº¿æ€§æ’å€¼

### å­˜å‚¨ä½¿ç”¨ç‡
- 100åˆ†: â‰¤ 70%
- 0åˆ†: â‰¥ 95%
- ä¸­é—´: çº¿æ€§æ’å€¼

### ç½‘ç»œçŠ¶æ€
- 100åˆ†: connected
- 50åˆ†: limited
- 0åˆ†: disconnected

### æ´»è·ƒåº¦
- 100åˆ†: < 5åˆ†é’Ÿ
- 80åˆ†: < 1å°æ—¶
- 50åˆ†: < 24å°æ—¶
- 20åˆ†: < 72å°æ—¶
- 0åˆ†: â‰¥ 72å°æ—¶

---

## ğŸ”§ å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•ä¿®æ”¹è¯„åˆ†é˜ˆå€¼ï¼Ÿ

ä¿®æ”¹ `device_health_v2.py` ä¸­çš„ `THRESHOLDS` é…ç½®ï¼š

```python
THRESHOLDS = {
    'battery': {
        'excellent': 80,  # ä¿®æ”¹è¿™é‡Œ
        'good': 50,
        ...
    },
    ...
}
```

### Q2: å¦‚ä½•æ·»åŠ æ–°çš„ç»´åº¦ï¼Ÿ

1. åœ¨ `DEFAULT_WEIGHTS` ä¸­æ·»åŠ æ–°ç»´åº¦
2. å®ç°å¯¹åº”çš„è¯„åˆ†æ–¹æ³•ï¼ˆå¦‚ `_score_xxx`ï¼‰
3. åœ¨ `calculate_score` ä¸­è°ƒç”¨æ–°æ–¹æ³•
4. æ›´æ–° `parse_metrics` è§£ææ–°å­—æ®µ

### Q3: æƒé‡æ€»å’Œä¸æ˜¯1.0æ€ä¹ˆåŠï¼Ÿ

ç®—æ³•ä¼šè‡ªåŠ¨éªŒè¯æƒé‡æ€»å’Œï¼Œå¦‚æœä¸æ˜¯1.0ä¼šæŠ›å‡ºå¼‚å¸¸ï¼š

```python
ValueError: æƒé‡æ€»å’Œå¿…é¡»ä¸º1.0ï¼Œå½“å‰ä¸º 0.95
```

### Q4: å¦‚ä½•å¤„ç†ç¼ºå¤±çš„æŒ‡æ ‡ï¼Ÿ

ç®—æ³•ä¼šä½¿ç”¨é»˜è®¤å€¼ï¼š

```python
battery = metrics.get('battery_level', 0)  # é»˜è®¤0
temperature = metrics.get('temperature', 30)  # é»˜è®¤30â„ƒ
```

---

## ğŸ“š æ›´å¤šæ–‡æ¡£

- [è¯¦ç»†ç®—æ³•è¯´æ˜](./README_HEALTH_ALGORITHM.md) - å®Œæ•´çš„ç®—æ³•æ–‡æ¡£
- [é›†æˆç¤ºä¾‹](./health_integration_example.py) - ç³»ç»Ÿé›†æˆä»£ç 
- [ä¼˜åŒ–æ€»ç»“](./HEALTH_ALGORITHM_SUMMARY.md) - æ”¹è¿›å¯¹æ¯”å’Œæ€»ç»“

---

## ğŸ’¡ ä½¿ç”¨å»ºè®®

1. **å®šæœŸé‡‡é›†**: å»ºè®®æ¯5-10åˆ†é’Ÿé‡‡é›†ä¸€æ¬¡è®¾å¤‡å¥åº·åº¦
2. **æƒé‡è°ƒæ•´**: æ ¹æ®å®é™…ä¸šåŠ¡åœºæ™¯è°ƒæ•´æƒé‡é…ç½®
3. **é˜ˆå€¼ä¼˜åŒ–**: æ ¹æ®è®¾å¤‡ç±»å‹è°ƒæ•´è¯„åˆ†é˜ˆå€¼
4. **å†å²åˆ†æ**: ä¿å­˜å†å²æ•°æ®ç”¨äºè¶‹åŠ¿åˆ†æ
5. **å‘Šè­¦è”åŠ¨**: ç»“åˆå‘Šè­¦ç³»ç»Ÿå®ç°è‡ªåŠ¨åŒ–è¿ç»´

---

## ğŸ‰ å¼€å§‹ä½¿ç”¨

```bash
# 1. è¿è¡Œæµ‹è¯•
python device_health_v2.py

# 2. æŸ¥çœ‹æ–‡æ¡£
cat README_HEALTH_ALGORITHM.md

# 3. æŸ¥çœ‹é›†æˆç¤ºä¾‹
cat health_integration_example.py
```

---

**å¿«é€Ÿå¼€å§‹æŒ‡å—** | v2.0 | 2024-02-24
