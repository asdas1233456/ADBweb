{"name": "测试脚本数据格式一致性", "status": "failed", "statusDetails": {"message": "Failed: 发现 4 个steps_json格式错误", "trace": "self = <test_comprehensive.TestDataConsistency object at 0x000001C03B84B7D0>\ndb_connection = <sqlite3.Connection object at 0x000001C03B8A7100>\n\n    @allure.story(\"数据格式验证\")\n    @allure.title(\"测试脚本数据格式一致性\")\n    @allure.severity(allure.severity_level.CRITICAL)\n    def test_script_data_consistency(self, db_connection):\n        \"\"\"测试脚本数据格式一致性\"\"\"\n        cursor = db_connection.cursor()\n    \n        with allure.step(\"检查可视化脚本steps_json格式\"):\n            cursor.execute(\"\"\"\n                SELECT id, name, steps_json\n                FROM script\n                WHERE type = 'visual' AND steps_json IS NOT NULL\n                LIMIT 100\n            \"\"\")\n            scripts = cursor.fetchall()\n    \n            errors = []\n            for script in scripts:\n                script_id, name, steps_json = script\n                try:\n                    steps = json.loads(steps_json)\n                    if not isinstance(steps, list):\n                        errors.append(f\"脚本ID {script_id}: steps_json不是数组格式\")\n                except json.JSONDecodeError as e:\n                    errors.append(f\"脚本ID {script_id}: JSON解析失败 - {str(e)}\")\n    \n            if errors:\n                allure.attach(\"\\n\".join(errors), \"格式错误\", allure.attachment_type.TEXT)\n>               pytest.fail(f\"发现 {len(errors)} 个steps_json格式错误\")\nE               Failed: 发现 4 个steps_json格式错误\n\ntest_comprehensive.py:796: Failed"}, "description": "测试脚本数据格式一致性", "steps": [{"name": "检查可视化脚本steps_json格式", "status": "failed", "statusDetails": {"message": "Failed: 发现 4 个steps_json格式错误\n", "trace": "  File \"C:\\Users\\ddd\\Desktop\\ADBweb\\tests\\test_comprehensive.py\", line 796, in test_script_data_consistency\n    pytest.fail(f\"发现 {len(errors)} 个steps_json格式错误\")\n  File \"C:\\Users\\ddd\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\_pytest\\outcomes.py\", line 198, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\n"}, "attachments": [{"name": "格式错误", "source": "4ee2f79d-ceb5-44d8-8245-b42080187acb-attachment.txt", "type": "text/plain"}], "start": 1772039218312, "stop": 1772039218314}], "attachments": [{"name": "失败详情", "source": "77473955-ed9d-4fad-8e49-af4e1d5030a7-attachment.txt", "type": "text/plain"}, {"name": "执行时长", "source": "245e6fa3-d6ef-46c3-96a0-8c6f9158082c-attachment.txt", "type": "text/plain"}], "start": 1772039218312, "stop": 1772039218315, "uuid": "3dec6622-77c1-481e-96f0-c7820e06d000", "historyId": "37338d3696708796fae2bcc59c55b450", "testCaseId": "37338d3696708796fae2bcc59c55b450", "fullName": "test_comprehensive.TestDataConsistency#test_script_data_consistency", "labels": [{"name": "test_case", "value": "test_script_data_consistency"}, {"name": "tag", "value": "script"}, {"name": "story", "value": "数据格式验证"}, {"name": "severity", "value": "critical"}, {"name": "feature", "value": "数据一致性"}, {"name": "suite", "value": "test_comprehensive"}, {"name": "subSuite", "value": "TestDataConsistency"}, {"name": "host", "value": "LAPTOP-3V4QFELG"}, {"name": "thread", "value": "12180-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_comprehensive"}]}