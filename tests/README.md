# ADBweb æµ‹è¯•å¥—ä»¶

## æ¦‚è¿°

æœ¬ç›®å½•åŒ…å« ADBweb å¹³å°çš„å®Œæ•´æµ‹è¯•å¥—ä»¶ï¼Œä½¿ç”¨ pytest + allure æ¡†æ¶ï¼Œè¦†ç›–ç³»ç»Ÿå¥åº·ã€è®¾å¤‡ç®¡ç†ã€è„šæœ¬ç®¡ç†ã€AIåŠŸèƒ½ã€æ€§èƒ½æµ‹è¯•ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚

## æµ‹è¯•æ–‡ä»¶

### 1. test_all.py (ä¸»æµ‹è¯•æ–‡ä»¶)
- **æè¿°**: æ•´åˆæ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½çš„å®Œæ•´æµ‹è¯•å¥—ä»¶
- **æµ‹è¯•ç±»æ•°é‡**: 11ä¸ªæµ‹è¯•ç±»
- **è¦†ç›–èŒƒå›´**: 
  - ç³»ç»Ÿå¥åº·æ£€æŸ¥ (æœåŠ¡å¯ç”¨æ€§ã€æ•°æ®åº“è¿æ¥)
  - è®¾å¤‡ç®¡ç† (CRUDæ“ä½œã€è®¾å¤‡åˆ—è¡¨)
  - è„šæœ¬ç®¡ç† (CRUDæ“ä½œã€è„šæœ¬éªŒè¯)
  - AIè„šæœ¬ç”Ÿæˆ (å•ä¸ªã€æ‰¹é‡ã€å·¥ä½œæµ)
  - è„šæœ¬æ¨¡æ¿ç®¡ç† (CRUDæ“ä½œã€æ¨¡æ¿ä½¿ç”¨)
  - è®¾å¤‡å¥åº·åº¦ç›‘æ§ (å¥åº·åº¦æ¦‚è§ˆã€å‘Šè­¦è§„åˆ™)
  - å®šæ—¶ä»»åŠ¡ç®¡ç† (ä»»åŠ¡åˆ—è¡¨)
  - ä»ªè¡¨ç›˜åŠŸèƒ½ (æ•°æ®ç»Ÿè®¡)
  - æ•°æ®ä¸€è‡´æ€§éªŒè¯ (æ ¼å¼æ£€æŸ¥)
  - æ€§èƒ½æµ‹è¯• (å“åº”æ—¶é—´ã€å¹¶å‘æµ‹è¯•)
  - è¾¹ç•Œæ¡ä»¶æµ‹è¯• (è¾“å…¥éªŒè¯)

### 2. test_ai_element_locator.py
- **æè¿°**: AIæ™ºèƒ½å…ƒç´ å®šä½å™¨ä¸“é¡¹æµ‹è¯•
- **è¦†ç›–èŒƒå›´**: æˆªå›¾ä¸Šä¼ ã€å…ƒç´ åˆ†æã€OCRè¯†åˆ«ã€å¯è§†åŒ–åŠŸèƒ½

## æµ‹è¯•é…ç½®

### ç¯å¢ƒè¦æ±‚
- Python 3.8+
- åç«¯æœåŠ¡è¿è¡Œåœ¨ `http://localhost:8000`
- å‰ç«¯æœåŠ¡è¿è¡Œåœ¨ `http://localhost:5173`
- SQLite æ•°æ®åº“æ–‡ä»¶å­˜åœ¨ä¸”å¯è®¿é—®

### ä¾èµ–åŒ…
```bash
pip install -r requirements.txt
```

ä¸»è¦ä¾èµ–ï¼š
- pytest >= 7.0.0
- allure-pytest >= 2.13.0
- requests >= 2.28.0
- pytest-html >= 3.1.0
- pytest-timeout >= 2.1.0

## è¿è¡Œæµ‹è¯•

### 1. è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼ˆæ¨èï¼‰
```bash
# åŸºç¡€è¿è¡Œ
python -m pytest test_all.py -v

# ç”ŸæˆHTMLæŠ¥å‘Š
python -m pytest test_all.py --html=reports/report.html --self-contained-html -v

# ç”ŸæˆAllureæŠ¥å‘Š
python -m pytest test_all.py --alluredir=allure-results -v
```

### 2. è¿è¡Œç‰¹å®šæµ‹è¯•ç±»
```bash
# åªè¿è¡Œç³»ç»Ÿå¥åº·æ£€æŸ¥
python -m pytest test_all.py::TestSystemHealth -v

# åªè¿è¡Œè®¾å¤‡ç®¡ç†æµ‹è¯•
python -m pytest test_all.py::TestDeviceManagement -v

# åªè¿è¡ŒAIè„šæœ¬ç”Ÿæˆæµ‹è¯•
python -m pytest test_all.py::TestAIScriptGeneration -v
```

### 3. è¿è¡ŒAIå…ƒç´ å®šä½å™¨æµ‹è¯•
```bash
python -m pytest test_ai_element_locator.py -v
```

### 3. ç”Ÿæˆ Allure æŠ¥å‘Š
```bash
# ç”ŸæˆæŠ¥å‘Š
allure generate allure-results -o allure-report --clean

# å¯åŠ¨æŠ¥å‘ŠæœåŠ¡
allure serve allure-results
```

## æµ‹è¯•ç»“æœ

### æœ€æ–°æµ‹è¯•çŠ¶æ€ (2026-02-28)
- **æ•´åˆæµ‹è¯•å¥—ä»¶**: test_all.py (11ä¸ªæµ‹è¯•ç±»)
- **AIå…ƒç´ å®šä½å™¨**: test_ai_element_locator.py (ä¸“é¡¹æµ‹è¯•)
- **æ€»ä½“çŠ¶æ€**: ğŸŸ¢ å·²æ•´åˆä¼˜åŒ–

### æµ‹è¯•æ•´åˆè¯´æ˜
- âœ… å·²å°† test_complete.pyã€test_comprehensive.pyã€test_core_features.pyã€test_new_features.py æ•´åˆä¸º test_all.py
- âœ… ä¿ç•™ test_ai_element_locator.py ä½œä¸ºAIå…ƒç´ å®šä½å™¨ä¸“é¡¹æµ‹è¯•
- âœ… åˆ é™¤äº†é‡å¤å’Œå†—ä½™çš„æµ‹è¯•æ–‡ä»¶
- âœ… ä¼˜åŒ–äº†æµ‹è¯•ç»“æ„ï¼Œæé«˜äº†å¯ç»´æŠ¤æ€§

### æµ‹è¯•æ–‡ä»¶ç»“æ„
```
tests/
â”œâ”€â”€ test_all.py                    # ä¸»æµ‹è¯•æ–‡ä»¶ï¼ˆæ•´åˆæ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½ï¼‰
â”œâ”€â”€ test_ai_element_locator.py     # AIå…ƒç´ å®šä½å™¨ä¸“é¡¹æµ‹è¯•
â”œâ”€â”€ conftest.py                    # pytesté…ç½®
â”œâ”€â”€ pytest.ini                     # pytestè®¾ç½®
â”œâ”€â”€ requirements.txt               # æµ‹è¯•ä¾èµ–
â””â”€â”€ README.md                      # æœ¬æ–‡æ¡£
```

## æµ‹è¯•åˆ†ç±»

### æŒ‰åŠŸèƒ½åˆ†ç±»
- **æ ¸å¿ƒåŠŸèƒ½**: è®¾å¤‡ç®¡ç†ã€è„šæœ¬ç®¡ç†ã€AIç”Ÿæˆ
- **é«˜çº§åŠŸèƒ½**: æ‰¹é‡æ“ä½œã€å·¥ä½œæµã€æ¨¡æ¿ç³»ç»Ÿ
- **ç³»ç»ŸåŠŸèƒ½**: å¥åº·ç›‘æ§ã€å®šæ—¶ä»»åŠ¡ã€å‘Šè­¦
- **è´¨é‡ä¿è¯**: æ•°æ®ä¸€è‡´æ€§ã€æ€§èƒ½ã€å®‰å…¨

### æŒ‰ä¼˜å…ˆçº§åˆ†ç±»
- **P0 (é˜»å¡)**: ç³»ç»Ÿå¥åº·æ£€æŸ¥ã€åŸºç¡€API
- **P1 (å…³é”®)**: CRUDæ“ä½œã€AIåŠŸèƒ½
- **P2 (é‡è¦)**: é«˜çº§åŠŸèƒ½ã€æ€§èƒ½æµ‹è¯•
- **P3 (ä¸€èˆ¬)**: è¾¹ç•Œæ¡ä»¶ã€é”™è¯¯å¤„ç†

## æµ‹è¯•æ•°æ®

### è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•æ•°æ®
- æµ‹è¯•è„šæœ¬: `æµ‹è¯•è„šæœ¬_{timestamp}`
- æµ‹è¯•è®¾å¤‡: `TEST_{timestamp}`
- æµ‹è¯•æ¨¡æ¿: `æµ‹è¯•æ¨¡æ¿_{timestamp}`

### æ•°æ®æ¸…ç†
- æµ‹è¯•ç»“æŸåè‡ªåŠ¨æ¸…ç†åˆ›å»ºçš„æµ‹è¯•æ•°æ®
- æ•°æ®åº“ä¿®å¤è„šæœ¬: `../backend/fix_database_tables.py`

## æŠ¥å‘Šè¾“å‡º

### 1. HTML æŠ¥å‘Š
- ä½ç½®: `reports/report.html`
- åŒ…å«: æµ‹è¯•ç»“æœã€æ‰§è¡Œæ—¶é—´ã€é”™è¯¯è¯¦æƒ…

### 2. Allure æŠ¥å‘Š
- ä½ç½®: `allure-report/index.html`
- åŒ…å«: è¯¦ç»†çš„æµ‹è¯•æ­¥éª¤ã€é™„ä»¶ã€è¶‹åŠ¿åˆ†æ

### 3. æ§åˆ¶å°è¾“å‡º
- å®æ—¶æ˜¾ç¤ºæµ‹è¯•è¿›åº¦
- UTF-8 ç¼–ç æ”¯æŒä¸­æ–‡è¾“å‡º
- å½©è‰²è¾“å‡ºæ˜¾ç¤ºæµ‹è¯•çŠ¶æ€

## æœ€ä½³å®è·µ

### 1. æµ‹è¯•å‰å‡†å¤‡
- ç¡®ä¿æœåŠ¡æ­£å¸¸è¿è¡Œ
- æ£€æŸ¥æ•°æ®åº“è¿æ¥
- æ¸…ç†æ—§çš„æµ‹è¯•æ•°æ®

### 2. æµ‹è¯•æ‰§è¡Œ
- ä¼˜å…ˆè¿è¡Œæ ¸å¿ƒåŠŸèƒ½æµ‹è¯•
- ä½¿ç”¨ `--maxfail=10` é™åˆ¶å¤±è´¥æ•°é‡
- ä½¿ç”¨ `--tb=short` ç®€åŒ–é”™è¯¯è¾“å‡º

### 3. é—®é¢˜æ’æŸ¥
- æŸ¥çœ‹è¯¦ç»†çš„é”™è¯¯æ—¥å¿—
- æ£€æŸ¥APIå“åº”çŠ¶æ€ç 
- éªŒè¯æ•°æ®åº“æ•°æ®å®Œæ•´æ€§

## æŒç»­é›†æˆ

### CI/CD é›†æˆå»ºè®®
```yaml
# GitHub Actions ç¤ºä¾‹
- name: Run Core Tests
  run: python -m pytest test_core_features.py -v --maxfail=5

- name: Run Full Tests
  run: python -m pytest test_comprehensive.py -v --maxfail=10
  continue-on-error: true
```

### æµ‹è¯•è¦†ç›–ç‡
- ç›®æ ‡è¦†ç›–ç‡: 80%+
- æ ¸å¿ƒåŠŸèƒ½è¦†ç›–ç‡: 95%+
- API ç«¯ç‚¹è¦†ç›–ç‡: 90%+

## è”ç³»ä¿¡æ¯

å¦‚æœ‰æµ‹è¯•ç›¸å…³é—®é¢˜ï¼Œè¯·è”ç³»å¼€å‘å›¢é˜Ÿæˆ–æŸ¥çœ‹é¡¹ç›®æ–‡æ¡£ã€‚

---

**æœ€åæ›´æ–°**: 2026-02-26  
**æµ‹è¯•æ¡†æ¶ç‰ˆæœ¬**: pytest 7.4.0 + allure 2.13.2